@model Bullows.Model.EnquiryModel


@{
    ViewData["Title"] = "Customer";
    Layout = "~/Views/Shared/_AuthMasterLayout.cshtml";
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<style>
    .smaller-font, .smaller-font input {
        font-size: smaller;
    }

    .smaller-height {
        height: 30px;
    }
</style>

<div class="divPanel">
    <form id="customerForm" asp-action="SaveCustomerDetails" asp-controller="Customer" method="post" data-ajax="true" data-ajax-update="divPanel">
        <div class="row cl-md-12 col-lg-12 col-sm-12 ">
            <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">Company Name</label>
                    @Html.TextBoxFor(c => c.CompanyName, new {@id="txtCompanyName", @class = "form-control", style = "width: 250px;"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Company Address</label>
                    @Html.TextBoxFor(c => c.CustomerAddress, new {@id="txtCustomerAddress", @class = "form-control", style = "width:250px;"})
                </div>
               
            </div>
        </div>
        <br/>
        <div class="row cl-md-12 col-lg-12 col-sm-12 ">
            <div class="row">
                <div class="col-md-2">
                    <label class="smaller-font">State</label>
                    @Html.DropDownListFor(c => c.StateId, new List<SelectListItem>
                    {
                    new SelectListItem { Text = "Maharashtra", Value = "1" },
                    new SelectListItem { Text = "Assam", Value = "2" },

                    }, "--Select--", new { @id = "drpstate", @class = "form-control smaller-font smaller-height", style = "width: 130px;" })
                </div>
                <div class="col-md-2">
                    <label class="smaller-font">District</label>
                @Html.DropDownListFor(c => c.DistrictId, new List<SelectListItem>
                {
                new SelectListItem { Text = "Pune", Value = "1" },
                new SelectListItem { Text = "Mumbai", Value = "2" },
                new SelectListItem { Text = "Nagpur", Value = "3" },
                new SelectListItem { Text = "Nashik", Value = "4" },
                    new SelectListItem { Text = "Baksa", Value = "5" },
                    new SelectListItem { Text = "Bajali", Value = "6" },
                    }, "--Select--", new { @id = "drpdistrict", @class = "form-control smaller-font smaller-height", style = "width: 130px;" })
                </div>
         
            <div class="col-md-2">
                    <label class="smaller-font">City</label>
                @Html.DropDownListFor(c => c.CityId, new List<SelectListItem>
                {
               
                new SelectListItem { Text = "Karve Nagar", Value = "1" },
                new SelectListItem { Text = "Kothrud", Value = "2" },
                new SelectListItem { Text = "Hadapsar", Value = "3" },  
                new SelectListItem { Text = "Andheri", Value = "4" },
                new SelectListItem { Text = "Bandra", Value = "5" },
                new SelectListItem { Text = "Dadar", Value = "6" },

                    }, "--Select--", new { @id = "drpcity", @class = "form-control smaller-font smaller-height", style = "width: 130px;" })
            </div>
            <div class="col-md-2">
                    <label class="smaller-font">Pin</label>
                    @Html.TextBoxFor(c => c.Pin, new {@id="txtpin", @class = "form-control smaller-font smaller-height", style = "width: 130px;"})
            </div>
                <div class="col-md-2">
                    <label class="smaller-font">PAN</label>
                    @Html.TextBoxFor(c => c.PAN, new {@id="txtpan", @class = "form-control smaller-font smaller-height", style = "width: 130px;"})
                </div>
            </div>
            </div>
        @* </div> *@
       
        <hr />
        <div class="row cl-md-12 col-lg-12 col-sm-12 ">
            <h6 >Add Contact Person</h6>
            <div class="row">
                @* <div class="col-md-2">
                    <label class="smaller-font">Title</label>
                    @Html.DropDownListFor(c => c.Category, new List<SelectListItem>{ new SelectListItem {Text = "Mr.", Value="1"}, new SelectListItem {Text = "Mrs.", Value="2"},
                    }, "--Select--",
                    new { @id = "drptitle",@class = "form-control smaller-font smaller-height", style = "width: 130px;" })
                </div> *@
                <div class="col-md-4">
                    <label class="smaller-font">Contact Person Name</label>
                    @Html.TextBoxFor(c => c.Contactperson, new {@id="txtcontactperson", @class = "form-control smaller-font smaller-height", style = "width: 130px;"})
                </div>
                <div class="col-md-2">
                    <label class="smaller-font">Designation</label>
                    @Html.TextBoxFor(c => c.Designation, new {@id="txtCustomerAddress", @class = "form-control", style = "width:150px;"})
                </div>
               
                <div class="col-md-2">
                    <label class="smaller-font">Mobile</label>
                    @Html.TextBoxFor(c => c.MobileNo, new {@id="txtMobile",@class = "form-control smaller-font smaller-height", style = "width: 130px;"})
                </div>
                <div class="col-md-2">
                    <label class="smaller-font">EmailId</label>
                    @Html.TextBoxFor(c => c.EmailId, new {@id="txtEmail",@class = "form-control smaller-font smaller-height", style = "width: 130px;"})
                </div>
            </div>
            <div class="row">
                <div class="col-md-1" style="margin-top:20px">
                    <input type="button" class="btn btn-primary rounded-pill" id="BtnAdd" style="width:100px" value="Add" />
                </div>
                <div class="col-md-1" style="margin-top:20px;margin-left:40px">
                    <input type="reset" class=" btn btn-secondary rounded-pill" id="btnCancel" style="width:100px" value="Cancel" />
                </div>
            </div>
            </div>
        <div class="row">
            <div class="col-md-1" style="margin-top:20px">
                <input type="submit" class="btn btn-Success rounded-pill" id="btnsave" style="width:100px" value="Save" />
            </div>
            <div class="col-md-1" style="margin-top:20px;margin-left:40px">
                <input type="reset" class=" btn btn-secondary rounded-pill" id="Cancel" style="width:100px" value="Cancel" />
            </div>
        </div>


        <div style="margin-top:10px;margin-right:10px">
            <div class="table-responsive" style="width:80%;max-height:400px;overflow-y:scroll">
                <table class="table" id="dataGrid">
                    <thead class="webgrid-header" style="background-color:gray">
                        <tr>
                            <th>Sr.NO</th>
                            <th id="tableId" style="display:none;">ContactId</th>
                            <th>Contact Person</th>
                            <th>Mobile</th>
                            <th>EmailID</th>
                           @*  <th>Action</th> *@
                        </tr>
                    </thead>
                   <tbody>
                        @if (Model.ContactPersons.Count == null)
                        {
                            <tr><td colspan="5">No data available</td></tr>
                        }
                        else
                        {
                            int i = 0;
                            @foreach (var contact in Model.ContactPersons)
                            {
                                i++;
                                <tr>
                                    <td>@i</td>
                                    <td style="display:none;">ContactId</td>
                                    <td>@contact.ContactPerson</td>
                                    <td>@contact.MobileNo</td>
                                    <td>@contact.EmailId</td>
                                   @*  <td>
                                        <a href="@Url.Action("Enquiry", "Enquiry", new { id = contact.ContactId })">
                                            <img style="height:20px;width:20px" src="~/img/pencil.jpg" title="Edit" />
                                        </a>
                                         </td>
                                <td>
                                        <a href="@Url.Action("Delete", "Enquiry", new { id = contact.ContactId })">
                                            <img style="height:20px;width:20px" src="~/img/delete.png" title="Delete" />
                                        </a>
                                    </td> *@
                                </tr>
                            }
                        }
                    </tbody> 
                 </table>
            </div>
        </div>     
</form>

</div>
@* <div style="margin-top:10px;margin-right:10px">
    <div class="table-responsive" style="width:80%;max-height:400px;overflow-y:scroll">
        <table class="table" id="dataGrid">
            <thead class="webgrid-header" style="background-color:gray">
                <tr>
                    <th>Sr.NO</th>
                    <th id="tableId" style="display:none;">CustomerID</th>
                    <th>CompanyName</th>
                    <th>PAN</th>
                    <th>State</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @if (ViewBag.GridCustomer == null)
                {
                    <tr><td colspan="5">No data available</td></tr>
                }
                else
                {
                    int i = 0;
                    @foreach (var item in ViewBag.GridCustomer)
                    {
                        i++;
                        <tr>
                            <td>@i</td>
                            <td style="display:none;"></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>
                                <a href="@Url.Action("Enquiry", "Enquiry", new { id = item.EnquiryId })">
                                    <img style="height:20px;width:20px" src="~/img/pencil.jpg" title="Edit" />
                                </a>
                                @*  </td>
                        <td> *@
                               @*  <a href="@Url.Action("Delete", "Enquiry", new { id = item.EnquiryId })">
                                    <img style="height:20px;width:20px" src="~/img/delete.png" title="Delete" />
                                </a>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>  *@

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        // Hide district and city dropdowns initially
        // $("#drpdistrict").hide();
        // $("#drpcity").hide();

        // Define city options for each district
        var cityOptions = {
            "1": ["1", "2", "3"], // Pune
            "2": ["4", "5", "6"], // Mumbai
            "3": [], // Nagpur (No cities in this example)
            "4": []  // Nashik (No cities in this example)
        };
       
        On changing the state dropdown
        $("#drpstate").change(function () {
            var selectedStateId = $(this).val();
            // Hide city dropdown
           // $("#drpcity").hide();
            // Show district dropdown
            $("#drpdistrict").show();
            $("#drpdistrict option").each(function () {
                var districtStateId = $(this).attr("data-state-id");
                if (selectedStateId == districtStateId || districtStateId == undefined) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
            $("#drpdistrict").val("--Select--");
        });
       
        $("#drpdistrict").change(function () {
            var selectedDistrictId = $(this).val();
            // Show city dropdown
            $("#drpcity").show();       
            $("#drpcity").empty();

            // Add cities based on selected district
            $.each(cityOptions[selectedDistrictId], function (index, value) {
                $("#drpcity").append('<option value="' + value + '">' + getCityName(value) + '</option>');
            });

            // Select the default option
            $("#drpcity").val("--Select--");
        });

        // Function to get city name based on its ID
        function getCityName(cityId) {
            switch (cityId) {
                case "1":
                    return "Karve Nagar";
                case "2":
                    return "Kothrud";
                case "3":
                    return "Hadapsar";
                case "4":
                    return "Andheri";
                case "5":
                    return "Bandra";
                case "6":
                    return "Dadar";
                default:
                    return "";
            }
        }

        
    });
</script>

