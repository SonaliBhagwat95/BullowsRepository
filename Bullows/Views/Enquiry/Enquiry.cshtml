@model Bullows.Model.EnquiryModel
@{
    ViewData["Title"] = "Enquiry";
    Layout = "~/Views/Shared/_AuthMasterLayout.cshtml";
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


<style>
    .smaller-font, .smaller-font input {
        font-size: smaller;
    }

    .smaller-height {
        height: 30px;
    }
</style>

<div class="divPanel" >
    <form asp-action="SaveEnquiryDetails" asp-controller="Enquiry" method="post" data-ajax="true" data-ajax-update="divPanel" enctype="multipart/form-data">
      
        <div class="row cl-md-12 col-lg-12 col-sm-12 ">
           <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">Proposal Date</label>
                    @Html.TextBoxFor(c => c.ProposalDate,"{0:dd-MM-yyyy}", new {@id="txtpdateid",@type="date", @class = "form-control smaller-font smaller-height", style = "width: 130px;"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Enquiry NO</label>
                    @Html.TextBoxFor(c => c.SalesNO, new {@id="txtsalesid", @class = "form-control smaller-font smaller-height", style = "width: 130px;"})
                </div>
            </div>
        </div>
           <hr />
  
         <h6>Company Details</h6>
          <div class=" cl-md-12 col-lg-12 col-sm-12 ">
             <div class="row">
                 <div class="col-md-3">
                    <label class="smaller-font">Company Name</label>
                    @Html.TextBoxFor(c => c.CompanyName, new{@id="txtcname",@class = "form-control smaller-font smaller-height",style="width:130px"})
                 </div>
                 <div class="col-md-3">
                    <label class="smaller-font">Address</label>
                    @Html.TextBoxFor(c => c.CustomerAddress,new {@id="txtcadresss",@class = "form-control smaller-font smaller-height",style="width:130px"})
                 </div>
             </div>
            <br/>
              <div class="row">
                    <div class="col-md-3">
                    <label class="smaller-font">Contact Person</label>
                    @Html.TextBoxFor(c => c.Contactperson,new {@id="txtcontactperson",@class = "form-control smaller-font smaller-height",style="width:130px"})
                    </div>
                    <div class="col-md-3">
                    <label class="smaller-font">Designation</label>
                    @Html.TextBoxFor(c => c.Designation,new {@id="txtdesignation",@class = "form-control smaller-font smaller-height",style="width:130px"})
                    </div>
                    <div class="col-md-3">
                         <label>Mobile No</label>
                    @Html.TextBoxFor(c => c.MobileNo,new {@id="txtmobile",@class = "form-control smaller-font smaller-height",style="width:130px"})
                    </div>
                    <div class="col-md-3">
                    <label class="smaller-font">Email ID</label>
                    @Html.TextBoxFor(c => c.EmailId,new {@id="txtemail",@class = "form-control smaller-font smaller-height",style="width:130px"})
                    </div>  
               
              </div>
              <br/>
            <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">Contact Person</label>
                    @Html.TextBoxFor(c => c.Contactperson,new {@id="txtcontactperson",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Designation</label>
                    @Html.TextBoxFor(c => c.Designation,new {@id="txtdesignation",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Mobile No</label>
                    @Html.TextBoxFor(c => c.MobileNo,new {@id="txtmobile",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Email ID</label>
                    @Html.TextBoxFor(c => c.EmailId,new {@id="txtemail",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>

            </div>
          </div>
        
              
          <hr />
        <h6>Component Details</h6>
        <div class="cl-md-12 col-lg-12 col-sm-12">
           <div class="row">
              
               <div class="col-md-3">
                    <label class="smaller-font">Component Name</label>
                    @Html.TextBoxFor(c =>c.Component,new{@id="txtcomponent",@class = "form-control smaller-font smaller-height",style="width:130px"})
               </div>
                <div class="col-md-3">
                    <label class="smaller-font">Construction</label>
                    @Html.TextBoxFor(c =>c.MaterialofConstruction,new{@id="txtmoconSTD",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Upload Drawings</label>
                    <input type="file" name="imageFile" required /> 
                </div>
           </div>
           <br/>
          
             <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">Length</label>
                    @Html.TextBoxFor(c =>c.LengthSize,new{@id="txtlenghtsize",@class = "form-control smaller-font smaller-height",style="width:130px;"})
                </div>
              
                <div class="col-md-3">
                    <label class="smaller-font">Width</label>
                    @Html.TextBoxFor(c => c.WidthSize, new { @id = "txtwidthsize", @class = "form-control smaller-font smaller-height" , style = "width:130px;" })
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Height</label>
                    @Html.TextBoxFor(c => c.HeightSize, new { @id = "txtheightsize", @class = "form-control smaller-font smaller-height", style = "width:130px;" })
                </div>
                
                <div class="col-md-3">
                    <label class="smaller-font"> Qty Assembly</label>
                    @Html.TextBoxFor(c =>c.QtyperAssembly,new{@id="txtqassembly",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>  
             </div>

             <br />
                <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">Weight</label>
                    @Html.TextBoxFor(c =>c.Weight,new{@id="txtWeight",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                
                    <div class="col-md-3">
                    <label class="smaller-font">Surface Area</label>
                    @Html.TextBoxFor(c =>c.SurfaceArea,new{@id="txtsurfacearea",@class = "form-control smaller-font smaller-height",style="width:130px"})
                     </div>
                    <div class="col-md-3">
                    <label class="smaller-font">Wall Thickness</label>
                    @Html.TextBoxFor(c => c.WallThickness ,new{@id="txtwallthickness",@class = "form-control smaller-font smaller-height",style="width:130px"})
                    </div>

                   <div class="col-md-3">
                    <label class="smaller-font">Viscosity(Sec)</label>
                    @Html.TextBoxFor(c =>c.Viscosity,new{@id="txtmoconSTD",@class = "form-control smaller-font smaller-height",style="width:130px;"})
                </div>
                </div><br/>
            
               @*  New Fields Added on 15/04/24 *@
            <div class="row">
               
                <div class="col-md-3">
                    <label class="smaller-font">Consumption per day </label><br />
                    <input type="radio" name="Consumption" value="Paint" />&nbsp;&nbsp;&nbsp<span style="font-size:small">Paint</span>
                    <input type="radio" name="Consumption" value="Powder" />&nbsp;&nbsp;<span style="font-size:small">Powder</span>
                </div>

                <div class=" paint col-md-3">
                    <label class="smaller-font">Paint(ltr)</label>
                    @Html.TextBoxFor(c => c.Paint ,new{@id="txtpaint",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class=" Powder col-md-3">
                    <label class="smaller-font">Powder(kg)</label>
                    @Html.TextBoxFor(c => c.Powder ,new{@id="txtPowder",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>

                <div class="col-md-3">
                    <label for="CategoryDropdown" class="smaller-font">Category:</label>
                @Html.DropDownListFor(c => c.Category, new List<SelectListItem>{ new SelectListItem {Text = "Dry Paint Booth", Value="1"}, new SelectListItem {Text = "Wet Paint Booth", Value="2"},
                }, "--Select--",
                    new { @id = "Category", @class = "form-control smaller-font smaller-height", style = "width: 130px;" })
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">DFT(micron)</label>
                    @Html.TextBoxFor(c => c.DFT ,new{@id="txtwallthickness",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
            </div><br/>
           
            <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">No of Colours</label>
                    @Html.TextBoxFor(c =>c.NoOfColors,new{@id="txtWeight",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">No of coats</label>
                    @Html.TextBoxFor(c =>c.NoOfCoats,new{@id="txtmoconSTD",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Specific heat of component(kcal/hr.) </label>
                    @Html.TextBoxFor(c =>c.SpecificHeat,new{@id="txtsurfacearea" ,@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Component handling </label>
                    @Html.DropDownListFor(c => c.ComponentHandling, new List<SelectListItem>
                    {
                    new SelectListItem { Text = "EOT", Value = "EOT" },
                    new SelectListItem { Text = "Conveyor", Value ="Conveyor" },
                    new SelectListItem { Text = "Track and trolley", Value = "Track and trolley" },
                    new SelectListItem { Text = "Automatic ", Value = "Automatic" },
                    new SelectListItem { Text = "Manual ", Value = "Manual" }
                    }, "--Select--", new { @id = "drpCpmonenthandling", @class = "form-control smaller-font smaller-height", style = "width: 130px;" })
                </div>
            </div>
            <br />

            <div class="row">
                <div class="Conveyor col-md-3">
                    <label class="smaller-font">Conveyor</label>
                    @Html.DropDownListFor(c=> c.Conveyor ,new List<SelectListItem>
                    {
                    new SelectListItem{Text="Continous",Value="Continous"},
                    new SelectListItem{Text="Stop and Go",Value="Stop and Go"},
                    new SelectListItem{Text="Power and free Overhead ",Value="Power and free Overhead"},
                    new SelectListItem{Text="Biplanner",Value="Biplanner"},
                    new SelectListItem{Text="Inverted",Value="Inverted"}
                    },"Select",new {@id="drpConveyor",@class = "form-control smaller-font smaller-height",style="width:130px;"})
                </div>
                <div class="Pitch col-md-3">
                    <lable class="smaller-font">Pitch(mm)</lable>
                    @Html.TextBoxFor(c => c.Pitch,new{@id="txtPitch",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class=" Speed col-md-3">
                    <lable class="smaller-font">Speed(m/min)</lable>
                    @Html.TextBoxFor(c => c.Speed,new{@id="txtSpeed",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Loading & Unloading </label>
                    @Html.DropDownListFor(c=> c.LoadingUnloading ,new List<SelectListItem>
                    {
                    new SelectListItem{Text="Manual",Value="Manual"},
                    new SelectListItem{Text="Automatic",Value="Automatic"},
                    
                    },"Select",new {@id="drpLoadingUnloading",@class = "form-control smaller-font smaller-height",style="width:130px;"})
                </div>


            </div>
             <br/> 
             <div class="row">
                <div class="col-md-3">
                    <label class="smaller-font">Production Shift </label>
                    @Html.TextBoxFor(c => c.ProductionRequirement,new{@id="txtproreuirement",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                <div class="col-md-3">
                    <label class="smaller-font">Working days</label>
                    @Html.TextBoxFor(c => c.Workingdays,new{@id="txtworkday",@class = "form-control smaller-font smaller-height",style="width:130px"})
                </div>
                   <div class="col-md-3">
                    <label class="smaller-font">Number of Shifts</label>
                    @Html.TextBoxFor(c => c.NumberofShifts,new{@id="txtnumofshifts",@class = "form-control smaller-font smaller-height",style="width:130px"})
                    </div>
                     <div class="col-md-3">
                    <label class="smaller-font">Effective Working</label>
                    @Html.TextBoxFor(c=>c.EffectiveWorking,new{@id="txteeffworking",@class = "form-control smaller-font smaller-height",style="width:130px"})
                     </div>
             </div>    
        </div>
        <br />
        
        <div class="cl-md-12 col-lg-12 col-sm-12">
            <button type="submit" id="saveButton" class="btn btn-success rounded-pill" style="width:100px">Save</button>
            <button type="reset" id="clrbtn" class="btn btn-default rounded-pill " style="width:100px">Clear</button>
        </div>
    </form>
</div>



<div  style="margin-top:10px;margin-right:10px">
    <div class="table-responsive" style="width:80%;max-height:400px;overflow-y:scroll">
        <table class="table">
            <thead class="webgrid-header" style="background-color:gray"> 
                <tr>
                    <th>Sr.NO</th>
                    <th id="tableId" style="display:none;">Enquiry Id</th>
                    <th>Enquiry Number</th>
                    <th>Company Name</th>
                    <th>Component Name</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @if(ViewBag ==null)
                {
                    <tr><td colspan="5">No data available</td></tr>
                }
                else
                {
                    int i = 0;
                    @foreach (var item in ViewBag.GridData)
                    {
                        i++;
                        <tr>
                            <td>@i</td>
                            <td style="display:none;">@item.EnquiryId</td>
                            <td>@item.SalesNO</td>
                            <td>@item.CompanyName</td>
                            <td>@item.Component</td>
                            <td>
                                <a href="@Url.Action("Enquiry", "Enquiry", new { id = item.EnquiryId })">
                                    <img style="height:20px;width:20px" src="~/img/pencil.jpg" title="Edit" />
                                </a>
                                 @* </td> *@
                        @* <td> *@
                                <a href="@Url.Action("Delete", "Enquiry", new { id = item.EnquiryId })">
                                    <img style="height:20px;width:20px" src="~/img/delete.png" title="Delete" />
                                </a>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div> 

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('.Powder').hide();
        $('.paint').hide();

        $("#drpCpmonenthandling").change(function () {
            var selectedValue = $(this).val();

            if (selectedValue === "Conveyor") {
                $('.Conveyor').closest('.col-md-3').show();
                $('.Pitch').closest('.col-md-3').show();
                $('.Speed').closest('.col-md-3').show();
            } else {
                $('.Conveyor').closest('.col-md-3').hide();
                $('.Pitch').closest('.col-md-3').hide();
                $('.Speed').closest('.col-md-3').hide();
            }
        });

        $('input[name="Consumption"]').change(function () {
           
            if ($(this).val() == 'Paint') {
                
                $('.paint').show();
                $('.Powder').hide();
            } else if ($(this).val() =='Powder') {
                
                $('.Powder').show();
                $('.paint').hide();
            }
        });

        $('#txtpaint').on('input', function () {
            var paintValue = parseInt($(this).val());
            if (paintValue < 20) {
                $('#Category').val('1'); 
            } else {
                $('#Category').val('2'); 
            }
        });


    });//end ready function
</script>
    


